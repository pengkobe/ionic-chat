<ion-view title="{{name}}" hide-tabsxietong>
    <!-- 消息主体 -->
    <ion-content class="rj-stable-content" delegate-handle="messageDetailsScroll" id="message-detail-content" ng-class="{'message-detail-height': showPhonebar}" style="background-color:#eee">
        <ion-refresher pulling-text="加载中..." on-refresh="doRefresh()" pulling-icon=""></ion-refresher>
        <div style="height:1px" ng-show="fixReflowtag"></div>
        <ol id="lstMessage">
            <li ng-repeat="message in hisMsgs track by $index" class="rj-chatmessage-list" id="msg_{{message.messageId}}" data-messageid="{{message.messageId}}">
                <div ng-include src="buildUrl(message.objectName)"></div>
            </li>
        </ol>
    </ion-content>
    <!-- 麦克风图标(TODO:根据声音大小调节) -->
    <div class="microphone" ng-class="{'active':isStartRecord}">
        <img ng-src="{{voiceImg.url}}" ng-show="!recordWait">
        <ion-spinner icon="spiral" ng-show="recordWait"></ion-spinner>
    </div>
    <ion-footer-bar align-title="left" class="bar-light xietong-foot-bar" resize-foot-bar style="flex-direction:column" ng-class="{'message-footer-height':showPhonebar}">

        <!-- 输入切换
        send_content="{{send_content}}"
        is-start-record="{{isStartRecord}}"
         show-phonebar="{{showPhonebar}}"
        -->
        <chat-input
        on-voice-hold="onVoiceHold"
        on-voice-release="onVoiceRelease"
        on-show-face="onShowWXFace"
        on-show-phonebar="onShowPhonebar"
        on-send-text-message="onSendTextMessage"
        switch-input-method="switchInputMethod"
        >
        </chat-input>

         <!-- 表情 -->
        <qq-face
        ng-show="showWXFace"
        select-qq-face="selectQQFace">
        </qq-face>

        <!-- 聊天辅助工具1-->
        <chat-tool-bar
        ng-show="showPhonebar&& !showWXFace"
        conversationType="{{conversationType}}"
        send-photo="sendPhoto" >
        </chat-tool-bar>

    </ion-footer-bar>
</ion-view>
